{"name":"Almostvanilla.js","tagline":"Tiny tiny JavaScript lib","body":"# almostvanilla.js\r\n\r\n**Very, very small (<10kb minified) \"library\" that makes it easier to deal with events, real-time resizing/moving of nodes, the DOM, and drag 'n drop.**\r\n\r\nAlmostvanilla.js is written for modern browsers, and as such does not support old versions of chrome/safari/firefox (as in >3 years old),\r\nnor IE 6/7/8. It is written in a functional manner with no prototype-based classes/objects. Everything is contained within a single global namespace - `av` - and there is no\r\naugmentation of built-in objects. It does not offer any high-level UI functionality (e.g. widgets).\r\n\r\n#Building\r\n \r\nTo build almostvanilla.js, you need [bakor](https://github.com/iqumulus/bakor/) installed. Bakor is a node module, \r\nand must be installed globally, i.e. `npm install -g bakor`.\r\nOnce installed, build by running `bakor` in the project root directory.\r\n\r\nThis will produce a set of files in the `./build/` directory which can be included in your application.\r\n \r\nNote that you need to build av for the samples in `samples/` to work. \r\n\r\n**You can also download pre-built stable versions [here](https://github.com/cvasseng/almostvanilla.js/releases)** \r\n \r\n# API Reference\r\n  \r\n**Base Functions**  \r\n  * `av.merge(a, b)`: merge object `b` into object `a`. Object `b` is in other words deep copied into object `a`.\r\n  * `av.copy(obj)`: deep-copy an object and return the copy\r\n  * `av.ready(fn)`: add a function to be called when initializing the library\r\n  * `av.init()`: initialize the library. This is normally called automatically when the document is ready\r\n  * `av.events()`: returns an event dispatcther object with the functions `on`, `emit`, and `clear`\r\n    \r\n**DOM API**\r\n  * `av.ap(target, ...)`: append one or more DOM nodes to the DOM node `target`\r\n  * `av.cr(type, [cssClass], [value], [id])`: create and return a new DOM node\r\n  * `av.style(node(s), styleObject)`: style a node. Node can be an array, in which case all nodes will be styled at once\r\n  * `av.byid(id)`: get a DOM node by id\r\n  * `av.on(target(s), event, callback, [context]`: attach an event listener to a DOM node. Target can be an array of nodes.\r\n  * `av.nodefault(event)`: use to cancel event propogation on the supplied DOM event handle\r\n  * `av.size(node)`: returns an object - `{w, h}` - containing the size of the supplied DOM node\r\n  * `av.pos(node)`: returns an object -`{x, y}` - containing the position of the supplied DOM node\r\n  * `av.sel([target], selector)`: query selector function. Target is the node to query. If left blank, `document.body` will be queried.\r\n  * `av.Mover(handle, target, axis)`: make a DOM node movable. Handle is the move handle, target is the node to move, and axis is the axis for which moving is allowed ('X', 'Y', or 'XY'). The returned object has an event emitter (`on(...)`) which can be used to listen to `Done`, `Moving`, and `Start` events. **Important:** `body` and `html` must be set to `width: 100%; height: 100%` for the mouse events to work properly!\r\n  * `av.Resizer(handle, target, axis)`: make a DOM node resizable. Handle is the resize handle, target is the node to resize, and axis is the axis for which resizing is allowed ('X', 'Y', or 'XY'). The returned object has an event emitter (`on(...)`) which can be used to listen to `Done`, `Resizing`, and `Start` events.\r\n  \r\n**Type Checks**  \r\n  * `av.isNull(what)`: returns true if `what` is null or undefined\r\n  * `av.isStr(what)`: returns true if `what` is a string\r\n  * `av.isNum(what)`: returns true if `what` is a number\r\n  * `av.isFn(what)`: returns true if `what` is a function\r\n  * `av.isArr(what)`: returns true if `what` is an array\r\n  * `av.isBool(what)`: returns true if `what` is a boolean\r\n  * `av.isBasic(what)`: returns true if `what` is a basic type (number, string, function, bool) \r\n  \r\n**Hotkey System**  \r\n  * `av.registerHotkey(key, [context], function)`: register a hotkey. Key is a string of keys, e.g. \"META+S\". Context is the context in which the hotkey is active. Function is the function to call when the key combination is entered.\r\n  * `av.sethotkeyContext(context)`: set the current hotkey context\r\n  \r\n**Ajax** \r\n  \r\nAjax requests can be performed with `av.ajax(properties)`. The function returns an object with the following attributes:\r\n  * `on`: attach a listener to the ajax request\r\n  * `fire`: perform the request (when `properties.autoFire` is set to false, this allows for the preparation of a request without immediatly performing it. It also allows for easy re-firing)\r\n  * `request`: the `XMLHttpRequest` instance \r\n  \r\nThe properties argument is an object:\r\n    \r\n    {\r\n      url: 'request url',\r\n      type: 'get|post|update|put',\r\n      dataType: 'json|xml|text|octet',\r\n      data: payload data,\r\n      success: function to call on success,\r\n      error: function to call on error,\r\n      autoFire: bool - set to true (default) to perform the request immediatly\r\n    }\r\n    \r\n**File Uploads**\r\n\r\nThe file upload system uses `FileReader` to upload, and parse local files in your applications.\r\n\r\nIt' used as such: `av.readLocalFile(properties)`, where properties is an object:\r\n    \r\n    {\r\n      type: json|text|b64|binary,\r\n      multiple: true|false,\r\n      progress: function (percent) - function to call when the upload progress updates,\r\n      success: function to call when the file has been uploded to the browser,\r\n      error: function to call on errors\r\n    }  \r\n  \r\n**Drag 'n Drop**\r\n\r\nDrag and drop is handled with two different objects: \r\n  * `av.Draggable(target, type, payload)`: target is a DOM node, type is a string with type identifiers for the drag operation separated by whitespace, and payload is the data attached to the drag operation.\r\n  * `av.DropTarget(target, types)`: target is a DOM node, types is a string with type identifiers separated by whitespace that the drop area accepts\r\n  \r\n`av.Draggable` makes a node draggable, while `av.DropTarget` turns a node into a drop target.\r\n\r\nBoth functions return an object with a `on` function, which can be used to listen for the following events:\r\n\r\nDraggable events:\r\n  * `DragStart` - emitted when starting a drag operation\r\n  * `DragEnd` - emitted when completing a drag operation\r\n  \r\nDrop Target events:\r\n  * `DragEnter` - emitted when a draggable object enters the drop target\r\n  * `DragLeave` - emitted when a draggable object leaves the drop target\r\n  * `DragOver` - emitted when holding a draggable object over the drop target\r\n  * `Drop(payload, type, event)` - emitted when a draggable object is dropped on the target\r\n  \r\n#Quick Samples  \r\n  \r\nExample: creating a DIV and appending it to `document.body`:\r\n    \r\n    av.ap(document.body, av.cr('div', 'myclass', 'Hello world!'));    \r\n\r\nExample: styling a DOM node:\r\n    \r\n    av.style(myDOMNode, {\r\n      color: '#FFF',\r\n      fontSize: '10px'\r\n    });\r\n    \r\nExample: attaching an event listener to `document.body`:\r\n    \r\n    var cancelEvent = av.on(document.body, 'click', function (e) {\r\n      ...\r\n    });\r\n    \r\n    //cancelEvent is now a function that can be called to detach the listener\r\n    \r\nExample: creating an event listener:\r\n    \r\n    //Create an object with an event listener in it\r\n    function MyObject() {\r\n      var events = av.events();\r\n    \r\n      function sayHello() {\r\n        events.emit('Hello');\r\n      }\r\n    \r\n      return {\r\n        sayHello: sayHello,\r\n        on: events.on\r\n      }\r\n    }\r\n    \r\n    //Instance the object\r\n    var foobar = MyObject();\r\n    \r\n    //Attach an event listener\r\n    foobar.on('Hello', function () {\r\n      console.log('foobar emitted Hello!');\r\n    });\r\n    \r\n    //Call the hello function, which will emit the event and trigger the above handler\r\n    foobar.sayHello();\r\n    \r\nExample: create a Movable DIV:\r\n    \r\n    CSS:\r\n    \r\n    html, body {\r\n      width: 100%;\r\n      height: 100%;  \r\n    }\r\n    \r\n    .movable {\r\n      position: absolute;\r\n    }\r\n    \r\n    JavaScript:\r\n    \r\n    var node = av.cr('div', 'movable', 'Move me!');   \r\n    av.Mover(node);\r\n    av.ap(document.body, node);\r\n    \r\nExample: create a resizable DIV:\r\n    \r\n    var node = av.cr('div', '', 'Resize me!'); \r\n    av.Resizer(node);\r\n    av.ap(document.body, node);\r\n    \r\nExample: get a file from the user, upload it to the browser, and output the data:\r\n\r\n    av.readLocalFile({\r\n      type: 'text',\r\n      success: function (data) {\r\n        av.ap(document.body,\r\n          av.cr('div', '', 'Uploaded file ' + data.filename + ' (' + data.size + ' bytes)'),\r\n          av.cr('pre', '', data.data)\r\n        );  \r\n      }  \r\n    });\r\n\r\n# License\r\n\r\nMIT. See LICENSE.md for details.\r\n","google":"UA-70966670-2","note":"Don't delete this file! It's used internally to help with page regeneration."}